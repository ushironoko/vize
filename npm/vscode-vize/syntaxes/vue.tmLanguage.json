{
  "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
  "name": "Vue",
  "scopeName": "source.vue",
  "patterns": [
    { "include": "#vue-comments" },
    { "include": "#vue-template" },
    { "include": "#vue-script" },
    { "include": "#vue-style" },
    { "include": "#vue-custom-block" }
  ],
  "repository": {
    "vue-comments": {
      "begin": "<!--",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.comment.begin.html" }
      },
      "end": "-->",
      "endCaptures": {
        "0": { "name": "punctuation.definition.comment.end.html" }
      },
      "name": "comment.block.html"
    },
    "vue-template": {
      "begin": "(<)(template)\\b(?=[^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.template.html" }
      },
      "end": "(</)(template)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.template.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-template-tag" },
        { "include": "#vue-template-content" }
      ]
    },
    "vue-template-tag": {
      "begin": "\\G",
      "end": ">",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-tag-attributes" }
      ]
    },
    "vue-template-content": {
      "begin": "(?<=>)",
      "end": "(?=</template>)",
      "patterns": [
        { "include": "#vue-interpolation" },
        { "include": "#vue-directives" },
        { "include": "#html-tags" },
        { "include": "#html-entities" }
      ]
    },
    "vue-interpolation": {
      "begin": "\\{\\{",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.template-expression.begin.vue" }
      },
      "end": "\\}\\}",
      "endCaptures": {
        "0": { "name": "punctuation.definition.template-expression.end.vue" }
      },
      "name": "meta.embedded.expression.vue",
      "patterns": [
        { "include": "source.js" }
      ]
    },
    "vue-directives": {
      "patterns": [
        {
          "match": "\\b(v-if|v-else-if|v-else|v-for|v-show|v-bind|v-on|v-model|v-slot|v-pre|v-once|v-memo|v-cloak|v-text|v-html)\\b",
          "name": "keyword.control.directive.vue"
        },
        {
          "match": "(v-)[a-zA-Z0-9_-]+",
          "name": "entity.other.attribute-name.directive.vue"
        },
        {
          "match": "(@)([a-zA-Z0-9_.-]+)",
          "captures": {
            "1": { "name": "punctuation.definition.directive.vue" },
            "2": { "name": "entity.other.attribute-name.event.vue" }
          }
        },
        {
          "match": "(:)([a-zA-Z0-9_.-]+)",
          "captures": {
            "1": { "name": "punctuation.definition.directive.vue" },
            "2": { "name": "entity.other.attribute-name.binding.vue" }
          }
        },
        {
          "match": "(#)([a-zA-Z0-9_.-]+)",
          "captures": {
            "1": { "name": "punctuation.definition.directive.vue" },
            "2": { "name": "entity.other.attribute-name.slot.vue" }
          }
        }
      ]
    },
    "vue-script": {
      "patterns": [
        { "include": "#vue-script-ts" },
        { "include": "#vue-script-js" }
      ]
    },
    "vue-script-ts": {
      "begin": "(<)(script)\\b(?=[^>]*\\blang\\s*=\\s*['\"](?:ts|typescript)['\"][^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.script.html" }
      },
      "end": "(</)(script)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.script.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-script-tag" },
        {
          "begin": "(?<=>)",
          "end": "(?=</script>)",
          "contentName": "meta.embedded.block.typescript",
          "patterns": [
            { "include": "source.ts" }
          ]
        }
      ]
    },
    "vue-script-js": {
      "begin": "(<)(script)\\b(?=[^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.script.html" }
      },
      "end": "(</)(script)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.script.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-script-tag" },
        {
          "begin": "(?<=>)",
          "end": "(?=</script>)",
          "contentName": "meta.embedded.block.javascript",
          "patterns": [
            { "include": "source.js" }
          ]
        }
      ]
    },
    "vue-script-tag": {
      "begin": "\\G",
      "end": ">",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        {
          "match": "\\b(setup|lang|src|generic)\\b",
          "name": "entity.other.attribute-name.html"
        },
        { "include": "#vue-tag-attributes" }
      ]
    },
    "vue-style": {
      "patterns": [
        { "include": "#vue-style-scss" },
        { "include": "#vue-style-less" },
        { "include": "#vue-style-css" }
      ]
    },
    "vue-style-scss": {
      "begin": "(<)(style)\\b(?=[^>]*\\blang\\s*=\\s*['\"]scss['\"][^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.style.html" }
      },
      "end": "(</)(style)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.style.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-style-tag" },
        {
          "begin": "(?<=>)",
          "end": "(?=</style>)",
          "contentName": "meta.embedded.block.scss",
          "patterns": [
            { "include": "#vue-css-vbind" },
            { "include": "source.css.scss" }
          ]
        }
      ]
    },
    "vue-style-less": {
      "begin": "(<)(style)\\b(?=[^>]*\\blang\\s*=\\s*['\"]less['\"][^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.style.html" }
      },
      "end": "(</)(style)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.style.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-style-tag" },
        {
          "begin": "(?<=>)",
          "end": "(?=</style>)",
          "contentName": "meta.embedded.block.less",
          "patterns": [
            { "include": "#vue-css-vbind" },
            { "include": "source.css.less" }
          ]
        }
      ]
    },
    "vue-style-css": {
      "begin": "(<)(style)\\b(?=[^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.style.html" }
      },
      "end": "(</)(style)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.style.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        { "include": "#vue-style-tag" },
        {
          "begin": "(?<=>)",
          "end": "(?=</style>)",
          "contentName": "meta.embedded.block.css",
          "patterns": [
            { "include": "#vue-css-vbind" },
            { "include": "source.css" }
          ]
        }
      ]
    },
    "vue-style-tag": {
      "begin": "\\G",
      "end": ">",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        {
          "match": "\\b(scoped|module|lang|src)\\b",
          "name": "entity.other.attribute-name.html"
        },
        { "include": "#vue-tag-attributes" }
      ]
    },
    "vue-css-vbind": {
      "begin": "(v-bind)\\(",
      "beginCaptures": {
        "1": { "name": "support.function.vue" }
      },
      "end": "\\)",
      "name": "meta.function-call.vue",
      "patterns": [
        {
          "match": "[a-zA-Z_$][a-zA-Z0-9_$]*",
          "name": "variable.other.vue"
        },
        { "include": "#string-single" },
        { "include": "#string-double" }
      ]
    },
    "vue-custom-block": {
      "begin": "(<)([a-zA-Z][a-zA-Z0-9_-]*)\\b(?=[^>]*>)",
      "beginCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.custom.html" }
      },
      "end": "(</)(\\2)(>)",
      "endCaptures": {
        "1": { "name": "punctuation.definition.tag.begin.html" },
        "2": { "name": "entity.name.tag.custom.html" },
        "3": { "name": "punctuation.definition.tag.end.html" }
      },
      "patterns": [
        {
          "begin": "\\G",
          "end": ">",
          "endCaptures": {
            "0": { "name": "punctuation.definition.tag.end.html" }
          },
          "patterns": [
            { "include": "#vue-tag-attributes" }
          ]
        }
      ]
    },
    "vue-tag-attributes": {
      "patterns": [
        {
          "match": "\\b([a-zA-Z_:][a-zA-Z0-9_:.-]*)\\s*(=)",
          "captures": {
            "1": { "name": "entity.other.attribute-name.html" },
            "2": { "name": "punctuation.separator.key-value.html" }
          }
        },
        { "include": "#string-single" },
        { "include": "#string-double" }
      ]
    },
    "html-tags": {
      "patterns": [
        {
          "begin": "(<)([a-zA-Z][a-zA-Z0-9_-]*)(?=\\s|>|/>)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.tag.begin.html" },
            "2": { "name": "entity.name.tag.html" }
          },
          "end": "(/?>)",
          "endCaptures": {
            "1": { "name": "punctuation.definition.tag.end.html" }
          },
          "patterns": [
            { "include": "#vue-directives" },
            { "include": "#vue-tag-attributes" }
          ]
        },
        {
          "begin": "(</)",
          "beginCaptures": {
            "1": { "name": "punctuation.definition.tag.begin.html" }
          },
          "end": "([a-zA-Z][a-zA-Z0-9_-]*)(>)",
          "endCaptures": {
            "1": { "name": "entity.name.tag.html" },
            "2": { "name": "punctuation.definition.tag.end.html" }
          }
        }
      ]
    },
    "html-entities": {
      "match": "&([a-zA-Z0-9]+|#[0-9]+|#x[0-9a-fA-F]+);",
      "name": "constant.character.entity.html"
    },
    "string-single": {
      "begin": "'",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.string.begin.html" }
      },
      "end": "'",
      "endCaptures": {
        "0": { "name": "punctuation.definition.string.end.html" }
      },
      "name": "string.quoted.single.html"
    },
    "string-double": {
      "begin": "\"",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.string.begin.html" }
      },
      "end": "\"",
      "endCaptures": {
        "0": { "name": "punctuation.definition.string.end.html" }
      },
      "name": "string.quoted.double.html"
    }
  }
}
